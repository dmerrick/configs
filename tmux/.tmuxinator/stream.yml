# ~/.tmuxinator/stream.yml

name: stream
root: ~/other_projects/danalol-stream

# Optional tmux socket
# socket_name: workspace

# Runs before everything. Use it to start daemons etc.
# pre: sudo /etc/rc.d/mysqld start

# Runs in each window and pane before window/pane specific commands.
# pre_window: export IGNOREEOF=5

# Pass command line options to tmux. Useful for specifying a different tmux.conf.
# tmux_options: -f ~/.tmux.mac.conf

windows:
  - primary:
      pre: export IGNOREEOF=3
      panes:
        - clear; neofetch
  - secondary:
      pre: export IGNOREEOF=3
      panes:
        - clear; neofetch
  - tripbot:
      # ignore the first few CTRL-Ds (to prevent accidental closing)
      pre: export IGNOREEOF=3
      # two panes at the top, one big one at the bottom
      layout: fa9d,191x90,0,0[191x15,0,0{95x15,0,0,0,95x15,96,0,2},191x74,0,16,3]
      panes:
        - nice -n "-15" go run cmd/tripbot/tripbot.go >> log/bot.log 2>&1
        - nice -n "-15" ./bin/start-obs.sh
        - pane_with_multiple_commands:
          - clear
          - tail -F log/bot.log
  - media:
      panes:
        # try and start mopidy
        - nice -n "-15" mopidy || exit
        # try and start vlc-server
        - nice -n "-15" go run cmd/vlc-server/vlc-server.go || exit | tee -a log/vlc.log 2>&1
  - irc:
      panes:
        - irssi
